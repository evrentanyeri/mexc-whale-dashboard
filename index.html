<script>
async function fetchData() {
  try {
    const res = await fetch("/api/ticker");
    const json = await res.json();

    if (!json.success) {
      document.getElementById("signalTable").innerHTML =
        `<tr><td colspan="7" class="error">API Hatası: ${json.error}</td></tr>`;
      return;
    }

    const data = json.data;
    const table = document.getElementById("signalTable");

    table.innerHTML = "";

    data.forEach((row, i) => {
      table.innerHTML += `
        <tr>
          <td>${i + 1}</td>
          <td>${row.symbol}</td>
          <td>${row.price}</td>
          <td>${row.change}%</td>
          <td>${row.volume}</td>
          <td>${row.exchange}</td>
          <td>${row.pumpScore}</td>
        </tr>
      `;
    });

  } catch (err) {
    document.getElementById("signalTable").innerHTML =
      `<tr><td colspan="7" class="error">API okunamadı</td></tr>`;
  }
}

fetchData();
setInterval(fetchData, 5000);
</script>
